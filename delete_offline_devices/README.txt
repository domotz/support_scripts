Domotz Device Management Scripts

This repository contains two scripts to manage devices monitored by Domotz:

list_offline_devices.py: Lists devices that have been offline for a specified period.
delete_devices_from_csv.py: Deletes devices based on a provided CSV file.

Prerequisites
Python 3.x
The requests library (pip install requests)

Script 1: list_offline_devices.py
Description
This script fetches all devices monitored by Domotz agents and lists those that have been offline for a specified period. The output is saved to a CSV file named offline_devices.csv.

Fields to Update
API_KEY: Replace 'YOUR_API_KEY' with your actual Domotz API key.
API_URL: Update the API endpoint URL based on your location:
North American users: 'https://api-us-east-1-cell-1.domotz.com/public-api/v1'
Users outside of North America: 'https://api-eu-west-1-cell-1.domotz.com/public-api/v1'
OFFLINE_THRESHOLD_DAYS: Specify the number of days a device must be offline to be included. Default is 14 days.

Steps to Run
1. Open the script file list_offline_devices.py.
2. Update the API_KEY, API_URL, and OFFLINE_THRESHOLD_DAYS fields as needed.
3. Open a command prompt or terminal window and navigate to the directory containing the script.
4. Run the script with python list_offline_devices.py.

Script 2: delete_devices_from_csv.py
Description
This script deletes devices listed in the offline_devices.csv file generated by list_offline_devices.py. The results are saved in deleted_devices.csv.

Fields to Update
API_KEY: Replace 'YOUR_API_KEY' with your actual Domotz API key.
API_URL: Update the API endpoint URL based on your location:
North American users: 'https://api-us-east-1-cell-1.domotz.com/public-api/v1'
Users outside of North America: 'https://api-eu-west-1-cell-1.domotz.com/public-api/v1'

Steps to Run
1. Ensure offline_devices.csv is in the same directory as the script and has been reviewed/edited as needed.
2. Open the script file delete_devices_from_csv.py.
3. Update the API_KEY and API_URL fields as needed.
4. Open a command prompt and navigate to the directory containing the script.
5. Run the script with python delete_devices_from_csv.py.

Notes
- Ensure you have the necessary permissions for your Domotz API key to perform these operations.
- Carefully review the offline_devices.csv file before running the deletion script to avoid accidentally deleting important devices.
- The scripts can be customized further to suit specific needs. Feel free to adjust the code as necessary.